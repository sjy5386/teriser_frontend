(this.webpackJsonpteriser_frontend=this.webpackJsonpteriser_frontend||[]).push([[0],{41:function(e,t,c){},42:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(32),r=c.n(n),s=(c(41),c(42),c(14),c(3)),l=c(7),i=c(0),o=function(){return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)(l.b,{to:"/login",className:"btn btn-outline-primary",children:"Login"}),Object(i.jsx)(l.b,{to:"/register",className:"btn btn-primary",children:"Register"}),Object(i.jsx)(l.b,{to:"/point-cards",children:"Point cards"}),Object(i.jsx)(l.b,{to:"/add-project",children:"Add project"})]})},d=c(6),j=c.n(d),b=c(12),m=c(4),u=function(e){var t=e.label,c=e.name,a=e.type,n=e.placeholder,r=e.value,s=e.onChange,l=e.className,o=e.children;return Object(i.jsxs)("div",{className:"mb-3 ".concat(l),children:[Object(i.jsx)("label",{className:"form-label",htmlFor:c,children:t}),Object(i.jsx)("input",{id:c,className:"form-control",name:c,type:a,placeholder:n,value:r,onChange:s}),o]})},h=function(e){var t=e.variant,c=e.onClick,a=e.className,n=e.children;return Object(i.jsx)("button",{type:"button",className:"btn btn-".concat(t," ").concat(a),onClick:c,children:n})},p=c(35),O=c.n(p).a.create({baseURL:"https://teriser.codrest.com",withCredentials:!0}),x=function(e,t){return O.post("/developers/account",{name:e,email:t})},v=function(e,t){return O.post("/developers/sign",{email:e,loginToken:t})};function f(e){O.defaults.headers.common["X-TERISER-AUTH"]=e?"Bearer ".concat(e):void 0}var N=function(e){return O.put("/store/point",e)},g=c(2),y=c(13),k=["children"],C=["children"],_=["className","children"],w=["className","children"],T=function(e){var t=e.children,c=Object(y.a)(e,k);return Object(i.jsx)("h5",Object(g.a)(Object(g.a)({className:"card-title"},c),{},{children:t}))},F=function(e){var t=e.children,c=Object(y.a)(e,C);return Object(i.jsx)("h6",Object(g.a)(Object(g.a)({className:"card-subtitle mb-2 text-muted"},c),{},{children:t}))},E=function(e){var t=e.className,c=e.children,a=Object(y.a)(e,_);return Object(i.jsx)("div",Object(g.a)(Object(g.a)({className:"card-body ".concat(t)},a),{},{children:c}))},R=function(e){var t=e.className,c=e.children,a=Object(y.a)(e,w);return Object(i.jsx)("div",Object(g.a)(Object(g.a)({className:"card ".concat(t)},a),{},{children:c}))},S=c(19);function I(e,t){if(!t){var c={};return Object.keys(e).forEach((function(e){c[e]=""})),c}return Object(g.a)(Object(g.a)({},e),{},Object(S.a)({},t.name,t.value))}function L(e){var t=Object(a.useReducer)(I,e),c=Object(m.a)(t,2),n=c[0],r=c[1];return[n,Object(a.useCallback)((function(e){r(e.target)}),[]),Object(a.useCallback)((function(){r(null)}),[]),r]}var P=c(36);function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(a.useState)(e),c=Object(m.a)(t,2),n=c[0],r=c[1],s=Object(a.useCallback)((function(e){r([].concat(Object(P.a)(n),[e]))}),[n]),l=Object(a.useCallback)((function(e){r(n.filter((function(t){return t!==e})))}),[n]);return[n,s,l]}var q=["variant","className","children"],B=function(e){var t=e.variant,c=e.className,a=e.children,n=Object(y.a)(e,q);return Object(i.jsx)("div",Object(g.a)(Object(g.a)({className:"alert alert-".concat(t," ").concat(c),role:"alert"},n),{},{children:a}))},J=function(e){var t=e.alerts;return Object(i.jsx)(i.Fragment,{children:t.map((function(e,t){return Object(a.createElement)(B,Object(g.a)(Object(g.a)({},e),{},{key:t}),e.children)}))})},U=function(){var e=L({name:"",email:""}),t=Object(m.a)(e,2),c=t[0],a=t[1],n=c.name,r=c.email,s=A([]),o=Object(m.a)(s,2),d=o[0],p=o[1],O=function(){var e=Object(b.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="primary",c="",e.prev=2,e.next=5,x(n,r);case 5:t="success",c="Please check your email.",e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t="danger",c=e.t0.response.data.error.message;case 13:return e.prev=13,p({variant:t,children:c}),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-md"}),Object(i.jsxs)("div",{className:"col",children:[Object(i.jsx)("h3",{className:"text-center",children:"Teriser"}),Object(i.jsx)(J,{alerts:d})]}),Object(i.jsx)("div",{className:"col-md"})]}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-md"}),Object(i.jsx)("div",{className:"col",children:Object(i.jsx)(R,{children:Object(i.jsxs)(E,{children:[Object(i.jsx)(T,{className:"text-center",children:"Register"}),Object(i.jsx)(F,{className:"text-center",children:"Create a Teriser account"}),Object(i.jsx)(u,{label:"Name",name:"name",type:"text",placeholder:"Teri Kim",value:n,onChange:a}),Object(i.jsx)(u,{label:"Email",name:"email",type:"email",placeholder:"terikim@codrest.com",value:r,onChange:a}),Object(i.jsx)("div",{className:"d-grid gap-2",children:Object(i.jsx)(h,{variant:"primary",onClick:function(){return O()},children:"Register"})}),Object(i.jsxs)("p",{className:"mt-3 mb-0 text-center",children:["Already have an account? ",Object(i.jsx)(l.b,{className:"text-decoration-none",to:"/login",children:"Login"})]})]})})}),Object(i.jsx)("div",{className:"col-md"})]})]})},D=function(){var e=L({email:"",loginToken:""}),t=Object(m.a)(e,2),c=t[0],n=t[1],r=c.email,s=c.loginToken,o=A([]),d=Object(m.a)(o,2),p=d[0],O=d[1],x=function(){var e=Object(b.a)(j.a.mark((function e(){var t,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(r,s);case 3:t=e.sent,1===y&&(c=t.data.response)&&(f(c.token),localStorage.setItem("user",JSON.stringify(c))),k((y+1)%C.length),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),a=e.t0.response.data.error.message,O({variant:"danger",children:a});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),N=Object(a.useState)(0),g=Object(m.a)(N,2),y=g[0],k=g[1],C=[Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(u,{label:"Email",name:"email",type:"email",placeholder:"terikim@codrest.com",value:r,onChange:n}),Object(i.jsx)("div",{className:"d-grid gap-2",children:Object(i.jsx)(h,{variant:"primary",onClick:x,children:"Next"})}),Object(i.jsxs)("p",{className:"mt-3 mb-0 text-center",children:["Don't have an account? ",Object(i.jsx)(l.b,{className:"text-decoration-none",to:"/register",children:"Register"})]})]}),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("p",{className:"text-center",children:Object(i.jsx)("span",{className:"btn border rounded-pill px-3 py-1",onClick:k.bind(undefined,y-1),children:r})}),Object(i.jsx)("input",{className:"d-none",type:"email",name:"email",value:r}),Object(i.jsx)(u,{label:"LoginToken",name:"loginToken",type:"password",value:s,onChange:n}),Object(i.jsx)("div",{className:"d-grid gap-2",children:Object(i.jsx)(h,{variant:"primary",onClick:x,children:"Login"})})]}),Object(i.jsx)("p",{children:"Ok"})];return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-md"}),Object(i.jsxs)("div",{className:"col",children:[Object(i.jsx)("h3",{className:"text-center",children:"Teriser"}),Object(i.jsx)(J,{alerts:p})]}),Object(i.jsx)("div",{className:"col-md"})]}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-md"}),Object(i.jsx)("div",{className:"col",children:Object(i.jsx)(R,{children:Object(i.jsxs)(E,{children:[Object(i.jsx)(T,{className:"text-center",children:"Login"}),Object(i.jsx)(F,{className:"text-center",children:"Use your Teriser account"}),C[y]]})})}),Object(i.jsx)("div",{className:"col-md"})]})]})},K=function(){return localStorage.removeItem("user"),O.delete("/developers/sign").then((function(e){console.log(e.data.response)})).catch((function(e){console.log(e)})),f(),Object(i.jsx)(s.a,{to:"/login"})},M=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),c=t[0],n=t[1],r=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get("/store/point");case 3:t=e.sent,n(t.data.response),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){r()}),[]);var s=A([]),o=Object(m.a)(s,3),d=o[0],u=o[1],h=o[2],p=function(e){d.includes(e)?h(e):u(e)};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("h3",{children:"Point Cards"}),Object(i.jsx)("div",{className:"row row-cols-2 row-cols-md-6",children:c.map((function(e,t){return Object(i.jsx)("div",{className:"col p-2",children:Object(i.jsx)(R,{className:d.includes(e)?"border-primary bg-primary bg-opacity-10":"",onClick:p.bind(undefined,e),children:Object(i.jsxs)(E,{className:d.includes(e)?"text-primary":"",children:[Object(i.jsx)(T,{children:e.name}),Object(i.jsx)(F,{children:e.point}),"\\",e.price]})})},t)}))})]}),Object(i.jsx)("div",{className:"py-5"}),Object(i.jsx)("div",{className:"fixed-bottom card shadow",children:Object(i.jsxs)("div",{className:"container card-body d-flex justify-content-between",children:[Object(i.jsxs)("span",{children:[Object(i.jsx)("span",{className:"h6 text-muted",children:"Subtotal"}),Object(i.jsxs)("span",{className:"h2 text-primary ms-1 ms-md-3",children:["\\",d.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0)]})]}),Object(i.jsxs)(l.b,{className:"btn btn-primary",to:{pathname:"/checkout",state:{cart:d}},children:["Checkout ",d.length>0?Object(i.jsx)("span",{className:"badge text-primary bg-white",children:d.length}):void 0]})]})})]})};var H=void 0,V=function(e){var t=e.location.state?e.location.state.cart:[],c=t.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0),n=L({buyer_email:"",buyer_name:"",buyer_tel:""}),r=Object(m.a)(n,2),s=r[0],l=r[1],o=s.buyer_email,d=s.buyer_name,p=s.buyer_tel,x=Object(a.useState)("card"),v=Object(m.a)(x,2),f=v[0],g=v[1];!function(){var e=document.createElement("script");e.src="https://code.jquery.com/jquery-3.6.0.js",document.head.appendChild(e);var t=document.createElement("script");t.src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js",document.head.appendChild(t)}();var y=function(){var e=Object(b.a)(j.a.mark((function e(){var a,n,r,s,l,i,m;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return a=[],t.forEach((function(e){a.push({id:e.seq,quantity:1})})),e.prev=4,e.next=7,u=a,O.post("/store/payments",u);case 7:n=e.sent,r=n.data.response,s=window,l=s.IMP,r&&l&&(i=r.orderId,m=r.name,l.init("imp44399565"),l.request_pay({pg:"kcp",pay_method:f,merchant_uid:i,name:m,amount:c,buyer_email:o,buyer_name:d,buyer_tel:p},function(){var e=Object(b.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.success){e.next=14;break}return e.prev=1,e.next=4,N({receiptId:t.imp_uid,orderId:t.merchant_uid});case 4:c=e.sent,console.log(c),alert("Ok"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0);case 12:e.next=15;break;case 14:alert(t.error_msg);case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),alert(e.t0);case 16:case"end":return e.stop()}var u}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("div",{className:"pt-1 pb-4",children:Object(i.jsx)("h3",{children:"Teriser"})}),Object(i.jsxs)("div",{className:"row g-5",children:[Object(i.jsxs)("div",{className:"col-md-5 col-lg-4 order-md-last",children:[Object(i.jsxs)("h4",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(i.jsx)("span",{className:"text-primary",children:"Your cart"}),Object(i.jsx)("span",{className:"badge bg-primary rounded-pill",children:t.length})]}),Object(i.jsxs)("ul",{className:"list-group mb-3",children:[t.map((function(e,t){return Object(i.jsxs)("li",{className:"list-group-item d-flex justify-content-between lh-sm",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("h6",{className:"my-0",children:e.name}),Object(i.jsx)("small",{className:"text-muted",children:e.point})]}),Object(i.jsxs)("span",{className:"text-muted",children:["\\",e.price]})]},t)})),Object(i.jsxs)("li",{className:"list-group-item d-flex justify-content-between list-group-item-primary",children:["Total (KRW)",Object(i.jsxs)("strong",{children:["\\",c]})]})]}),Object(i.jsx)("div",{className:"d-none d-md-block",children:Object(i.jsx)("div",{className:"d-grid gap-2",children:Object(i.jsx)(h,{variant:"primary",onClick:y,children:"Continue to checkout"})})})]}),Object(i.jsxs)("div",{className:"col-md-7 col-lg-8",children:[Object(i.jsx)("h4",{children:"Billing address"}),Object(i.jsx)(u,{label:"Name",name:"buyer_name",value:d,onChange:l}),Object(i.jsx)(u,{label:"Email",name:"buyer_email",type:"email",value:o,onChange:l}),Object(i.jsx)(u,{label:"Tel",name:"buyer_tel",type:"tel",value:p,onChange:l}),Object(i.jsx)("hr",{className:"my-4"}),Object(i.jsx)("h4",{children:"Payment"}),Object(i.jsxs)("div",{className:"form-check",children:[Object(i.jsx)("input",{className:"form-check-input",type:"radio",id:"pay_method_card",name:"pay_method",value:"card",defaultChecked:"card"===f,onClick:g.bind(H,"card")}),Object(i.jsx)("label",{className:"form-check-label",htmlFor:"pay_method_card",children:"\ud83d\udcb3 Credit card"})]}),Object(i.jsxs)("div",{className:"form-check",children:[Object(i.jsx)("input",{className:"form-check-input",type:"radio",id:"pay_method_trans",name:"pay_method",value:"trans",defaultChecked:"trans"===f,onClick:g.bind(H,"trans")}),Object(i.jsx)("label",{className:"form-check-label",htmlFor:"pay_method_trans",children:"\ud83c\udfdb Real-time bank transfer"})]}),Object(i.jsxs)("div",{className:"form-check",children:[Object(i.jsx)("input",{className:"form-check-input",type:"radio",id:"pay_method_vbank",name:"pay_method",value:"vbank",defaultChecked:"vbank"===f,onClick:g.bind(H,"vbank")}),Object(i.jsx)("label",{className:"form-check-label",htmlFor:"pay_method_vbank",children:"\ud83c\udfdb Virtual account"})]}),Object(i.jsxs)("div",{className:"form-check",children:[Object(i.jsx)("input",{className:"form-check-input",type:"radio",id:"pay_method_phone",name:"pay_method",value:"phone",defaultChecked:"phone"===f,onClick:g.bind(H,"phone")}),Object(i.jsx)("label",{className:"form-check-label",htmlFor:"pay_method_phone",children:"\ud83d\udcf1 Mobile payment"})]}),Object(i.jsx)("hr",{className:"my-4"}),Object(i.jsx)("div",{className:"d-grid gap-2",children:Object(i.jsx)(h,{variant:"primary",onClick:y,className:"btn-lg",children:"Continue to checkout"})})]})]})]})},W=function(){var e=L({title:""}),t=Object(m.a)(e,2),c=t[0],a=t[1],n=c.title,r=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c={title:n},O.post("/projects",c);case 3:t=e.sent,console.log(t),alert(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}var c}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("h3",{children:"Add Project"}),Object(i.jsx)(u,{label:"Title",name:"title",value:n,onChange:a}),Object(i.jsx)(h,{variant:"primary",onClick:r,children:"Add project"})]})};var X=function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(s.b,{path:"/",exact:!0,component:o}),Object(i.jsx)(s.b,{path:"/register",component:U}),Object(i.jsx)(s.b,{path:"/login",component:D}),Object(i.jsx)(s.b,{path:"/logout",component:K}),Object(i.jsx)(s.b,{path:"/point-cards",component:M}),Object(i.jsx)(s.b,{path:"/checkout",component:V}),Object(i.jsx)(s.b,{path:"/add-project",component:W})]})},Y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,69)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))};r.a.render(Object(i.jsx)(l.a,{children:Object(i.jsx)(X,{})}),document.getElementById("root")),Y()}},[[68,1,2]]]);
//# sourceMappingURL=main.aa03c9a5.chunk.js.map